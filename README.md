# Random Users App

## Навигация

* [Обоснование стека технологий](#Обоснование-стека-технологий)
* [Структура проекта](#Структура-проекта)
* [Как запустить через docker-compose](#Как-запустить-через-docker-compose)
* [Как запустить тесты users через docker](#Как-запустить-тесты-users-через-docker)
* [Содержание тестов](#Содержание-тестов)

## Обоснование стека технологий

Проект использует следующий стек технологий:

* Python 3
* Django 5.2
* PostgreSQL
* Redis
* Nginx
* Docker Compose

* Выбор стека `Django + PostgreSQL` был выбран из-за их хорошей совместимости. Django предоставляет ORM для PostgreSQL, что упрощает работу с моделями и миграциями.
* Также Django предоставляет удобный функционал для тестирования веб-приложения.
* PostgreSQL поддерживает индексы, сложные запросы и оптимизацию для множественных записей, что подходит для приложения, где будет храниться большое количество записей о пользователях.
* Redis используется как кэш для ускорения работы приложения и улучшения производительности. В проекте Redis кэширует страницы списка пользователей, что снижает нагрузку на PostgreSQL и ускоряет ответы. Также удобная интеграция с Django.
* Nginx обеспечивает эффективное обслуживание статических файлов, обработку множественных одновременных запросов и проксирование запросов к Django.
* Docker Compose позволяет упростить установку и настройку окружения для разработки и тестирования.

## Структура проекта

Проект состоит из следующих директорий и файлов:

* `app/`: основная директория приложения, содержащая все необходимые файлы и директории
* `app/users/tests.py`: тесты веб-приложения
* `docker/`: директория, содержащая Docker-файлы для сервисов
* `docker-compose.yml`: файл, содержащий конфигурацию для запуска приложения через docker-compose
* `.env`: файл, содержащий переменные окружения для конфигурации приложения

## Как запустить через docker-compose

Инструкция по запуску приложения через docker-compose:

1. Установить docker и docker-compose
2. Клонировать репозиторий
3. В корне проекта настроить `.env` файл при необходимости (можно пропустить)
2. Перейти в директорию проекта и выполнить команду `docker compose up --build -d`
3. Приложение будет доступно по адресу `localhost`

## Как запустить тесты users через docker

* Запуск тестов производится с помощью команды: `docker exec django_app python manage.py test users`

* Примечание: перед запуском тестов необходимо запустить приложение через docker-compose, чтобы создать необходимые таблицы в базе данных.

## Содержание тестов

1. UserModelTest.test_user_creation – проверяет корректность создания пользователя и метода get_more_info()

2. FetchRandomUsersTest.test_fetch_random_users_success – проверяет успешное получение и сохранение пользователей из внешнего API с помощью fetch_random_users()

3. UserViewsTest.test_user_list_view – проверяет корректность отображения списка пользователей на главной странице (`/`)

4. UserViewsTest.test_user_detail_view – проверяет отображение детальной информации о пользователе по его ID (`/<id>/`)

5. UserViewsTest.test_random_user_view – проверяет корректную работу страницы случайного пользователя (`/random/`)

6. UserViewsTest.test_load_users_view_success – проверяет работу загрузки новых пользователей через POST-запрос, корректность редиректа, сообщений и кэширования.